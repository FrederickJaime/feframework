const { src, dest } = require('gulp');
const compiler = require('webpack');
const webpack = require('webpack-stream');
const config = require('../config');

export function jsCompileMin() {

  return src(`${config.js.srcDir}/sxm.phoenix.js`)
  .pipe(webpack({
      mode: 'production',
      watch: false,
      devtool: 'source-map',
      output: {
        filename: 'sxm.phoenix.min.js'
      },
      module: {
        rules: [
          { test: /\.css$/, loader: 'style!css' },
        ],
      },

  }, compiler, function(err, stats){
    
  }))
  .pipe(dest(`${config.local.appjs}`))
  .pipe(dest(`${config.js.distDir}/minified/`));

}